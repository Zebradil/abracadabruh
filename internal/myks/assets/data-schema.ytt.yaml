#! This file define a schema for all ytt data files. It can also contain default values.
#! Top-level keys are scopes, e.g. application, argocd, environment, helm.
#! Content of the `application` scope can be freely modified. More scopes can be added.
#! The `environment`, `helm` and `argocd` scopes are used by myks and should not be modified.
#! However, more keys can be added to these scopes.

#@data/values-schema
---
#! Add here any application-specific data.
application: {}
argocd:
  #! Namespace of the ArgoCD server.
  namespace: argocd
  app:
    #! If not set, the name of the currently rendered application is used.
    name: ""
  destination:
    #! spec.destination.name of the ArgoCD application.
    name: in-cluster
    #! spec.destination.server of the ArgoCD application.
    #! If set, used instead of spec.destination.name.
    server: ""
    #! spec.destination.namespace of the ArgoCD application.
    #! If not set, defaults to argocd.app.name.
    namespace: ""
  source:
    #! spec.source.path of the ArgoCD application.
    #! If not set, defaults to the destination path of the currently rendered application.
    #! With the default myks configuration: `rendered/envs/<environment.id>/<app.name>`
    path: ""
    #! spec.source.repoURL of the ArgoCD application.
    repoURL: ""
    #! spec.source.targetRevision of the ArgoCD application.
    targetRevision: main
environment:
  #! Unique identifier of the environment, required by myks.
  #@schema/validation min_len=1
  #@schema/nullable
  id: ""
  #! List of applications to be deployed in the environment, required by myks.
  applications:
    - #! Prototype of the application, required by myks.
      #@schema/validation min_len=1
      proto: ""
      #! Name of the application, used by myks. If not defined, the name of the prototype is used.
      name: ""
#! Configuration of the step that renders Helm charts.
helm:
  #! Used by myks.
  #! If true, adds `--include-crds` flag to `helm template`.
  includeCRDs: true
  #! Used by myks.
  #! If defined, passed as a value of `--kube-version` for `helm template`.
  kubeVersion: ""
  #! Used by myks.
  #! If defined, passed as a value of `--namespace` for `helm template`.
  namespace: ""
